<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    @if(selectedRecipe.title) {
      <ion-title>{{selectedRecipe.title}}</ion-title>
    } @else {
      <ion-title>Recipe not found</ion-title>
    }
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  @if(selectedRecipe.extendedIngredients) {
    <ion-item>
      <ion-label>
        <h2>Ingredients</h2>
      </ion-label>
    </ion-item>
    
    @for(ingredient of selectedRecipe.extendedIngredients; track ingredient.id) {
      
      <ion-card>
        <div>
          <img src={{ingredientImagesBaseUrl}}{{ingredient.image}} alt="Ingredient Image">
        </div>
        <ion-card-header>
          <div>
            <ion-card-title>{{ingredient.original}}</ion-card-title>
          </div>
          <div>
            @if(selectedUnitSystem == "US") {
              <ion-card-subtitle>{{ingredient.measures.us.amount}} {{ingredient.measures.us.unitLong}}</ion-card-subtitle>
            } @else {
              <ion-card-subtitle>{{ingredient.measures.metric.amount}} {{ingredient.measures.metric.unitLong}}</ion-card-subtitle>
            } 
          </div>
        </ion-card-header>
      </ion-card>
    }
  }

  @if(selectedRecipe.analyzedInstructions) {
    <ion-list>
      <ion-item >
        <ion-label>
          <h2>Instructions</h2>
        </ion-label>
      </ion-item>
      @for(instruction of selectedRecipe.analyzedInstructions; track instruction.name) {
        @for(step of instruction.steps; track step.number) {
          <ion-item>
            <ion-label><strong>{{step.number}}.</strong> {{step.step}}</ion-label>
          </ion-item>
        }
      }
    </ion-list>
    @if(selectedRecipeIsAFavourite) {
      <ion-button (click)="removeFromFavourites()" expand="full">
        Remove from favourites
        <ion-icon name="heart-outline"></ion-icon>
      </ion-button>
    } @else{
      <ion-button (click)="addToFavourites()" expand="full">
        Add to favourites
        <ion-icon name="heart-outline"></ion-icon>
      </ion-button>
    }
    
  }
  
</ion-content>
